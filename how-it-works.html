<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How It Works - ClearSkies</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
        <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="manifest" href="./manifest.json">
    <meta name="theme-color" content="#0ea5e9">
    <link rel="icon" href="./icons/logo.svg" type="image/svg+xml">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ClearSkies">
    <script src="./pwa.js" defer></script>

    <style>
        body {
            font-family: 'Plus Jakarta Sans', 'Inter', sans-serif;
            overflow-x: hidden;
            background: linear-gradient(160deg, #eef2ff 0%, #f0f9ff 40%, #f0fdf4 100%);
            background-attachment: fixed;
            color: #0f172a;
        }
        body::before {
            content: '';
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: 
                radial-gradient(circle at 20% 20%, rgba(147, 197, 253, 0.4) 0%, transparent 45%),
                radial-gradient(circle at 80% 80%, rgba(110, 231, 183, 0.35) 0%, transparent 45%),
                radial-gradient(circle at 75% 15%, rgba(196, 181, 253, 0.3) 0%, transparent 35%),
                radial-gradient(circle at 25% 75%, rgba(253, 230, 138, 0.25) 0%, transparent 35%);
            animation: aurora-shift 20s ease-in-out infinite alternate;
            z-index: -2;
            pointer-events: none;
        }
        @keyframes aurora-shift {
            0% { transform: scale(1) rotate(0deg); opacity: 0.8; }
            33% { transform: scale(1.05) rotate(1deg); opacity: 1; }
            66% { transform: scale(0.97) rotate(-1deg); opacity: 0.9; }
            100% { transform: scale(1.03) rotate(0.5deg); opacity: 1; }
        }
        #bg-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        #content-wrapper {
            position: relative;
            z-index: 1;
        }
        .content-section {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            padding: 2rem;
            position: relative;
            min-height: 100vh;
        }
        .glass-panel {
    background: rgba(255, 255, 255, 0.78);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.95);
    border-radius: 1.25rem;
    box-shadow: 0 4px 24px -4px rgba(14, 165, 233, 0.1), 0 1px 3px rgba(0,0,0,0.06), inset 0 1px 0 rgba(255,255,255,0.9);
    transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
}
.glass-panel:hover {
    box-shadow: 0 16px 48px -8px rgba(14, 165, 233, 0.2), 0 4px 12px rgba(0,0,0,0.08);
    transform: translateY(-3px);
    border-color: rgba(14, 165, 233, 0.25);
}
/* Navigation Styles */
        #navbar {
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    background: rgba(255, 255, 255, 0.88);
    backdrop-filter: blur(24px);
    -webkit-backdrop-filter: blur(24px);
    border-color: rgba(226, 232, 240, 0.8) !important;
    box-shadow: 0 4px 24px -4px rgba(0, 0, 0, 0.08), 0 1px 0 rgba(255,255,255,0.5);
}
        .mobile-menu {
            transition: transform 0.3s ease-in-out;
            transform: translateX(100%);
        }
        
        .mobile-menu:not(.hidden) {
            transform: translateX(0);
        }
        
        /* Initial state for scroll animations */
        .reveal-up {
            opacity: 1; /* Changed from 0 to ensure visibility if JS fails */
            transform: translateY(0); /* Reset default transform */
        }

        /* Ensure mobile menu doesn't cause overflow and is scrollable */
        #mobile-menu {
            max-height: 100vh;
            overflow-y: auto;
        }

        /* Hero section mobile adjustments */
        @media (max-width: 768px) {
            .content-section {
                padding: 1.5rem;
                min-height: auto;
                padding-top: 6rem;
            }
            #how-it-works h2 {
                font-size: 2.25rem;
                line-height: 1.2;
            }
            .glass-panel {
                padding: 1.5rem;
            }
        }

.nav-link {
    position: relative;
    color: #475569;
    transition: all 0.3s ease;
    padding: 8px 16px;
    border-radius: 8px;
    font-weight: 500;
}
.nav-link:hover {
    color: #0ea5e9;
    background: rgba(14, 165, 233, 0.08);
}
.nav-link.active {
    color: #0ea5e9;
    font-weight: 600;
}
.nav-link.active::after {
    content: '';
    position: absolute;
    bottom: 2px;
    left: 50%;
    transform: translateX(-50%);
    width: 50%;
    height: 2px;
    background: linear-gradient(90deg, transparent, #0ea5e9, transparent);
    border-radius: 2px;
    animation: nav-glow 2s ease-in-out infinite;
}
@keyframes nav-glow {
    0%, 100% { opacity: 0.6; }
    50% { opacity: 1; }
}
.gradient-text-animated {
    background: linear-gradient(135deg, #0ea5e9, #6366f1, #0d9488, #0ea5e9);
    background-size: 300% 300%;
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: gradient-shift 5s ease infinite;
}
@keyframes gradient-shift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}
.tilt-card {
    transform-style: preserve-3d;
    transform: perspective(1000px);
    transition: transform 0.35s ease, box-shadow 0.35s ease;
}
.tilt-card:hover {
    transform: perspective(1000px) rotateX(4deg) rotateY(4deg) scale(1.03);
    box-shadow: 0 24px 48px -8px rgba(14, 165, 233, 0.2);
}
@keyframes float-bounce {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
}
@keyframes shimmer-wave {
    0% { background-position: -200% center; }
    100% { background-position: 200% center; }
}
@keyframes spin-slow {
    to { transform: rotate(360deg); }
}
@keyframes fade-up {
    from { opacity: 0; transform: translateY(30px); }
    to { opacity: 1; transform: translateY(0); }
}
@keyframes slide-in-left {
    from { opacity: 0; transform: translateX(-40px); }
    to { opacity: 1; transform: translateX(0); }
}
@keyframes slide-in-right {
    from { opacity: 0; transform: translateX(40px); }
    to { opacity: 1; transform: translateX(0); }
}
@keyframes scale-in {
    from { opacity: 0; transform: scale(0.85); }
    to { opacity: 1; transform: scale(1); }
}
@keyframes bounce-in {
    0% { opacity: 0; transform: scale(0.3); }
    50% { opacity: 1; transform: scale(1.05); }
    70% { transform: scale(0.9); }
    100% { transform: scale(1); }
}
50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

    </style>
</head>
<body class="text-slate-900">

<!-- Loading Splash Screen -->
<div id="page-loader" style="position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(160deg,#eef2ff,#f0f9ff,#f0fdf4);z-index:9999;display:flex;align-items:center;justify-content:center;flex-direction:column;gap:20px;transition:opacity 0.6s ease,visibility 0.6s ease;">
    <div style="position:relative;width:64px;height:64px;">
        <div style="position:absolute;inset:0;border:3px solid rgba(14,165,233,0.2);border-top-color:#0ea5e9;border-radius:50%;animation:spin-slow 1s linear infinite;"></div>
        <div style="position:absolute;inset:10px;border:2px solid rgba(99,102,241,0.2);border-bottom-color:#6366f1;border-radius:50%;animation:spin-slow 0.6s linear infinite reverse;"></div>
        <div style="position:absolute;inset:22px;background:linear-gradient(135deg,#0ea5e9,#6366f1);border-radius:50%;animation:bounce-in 0.5s ease forwards;"></div>
    </div>
    <div style="font-family:'Plus Jakarta Sans',sans-serif;font-weight:700;font-size:18px;letter-spacing:3px;text-transform:uppercase;background:linear-gradient(135deg,#0ea5e9,#6366f1);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;">ClearSkies</div>
    <div style="font-family:'Plus Jakarta Sans',sans-serif;font-size:12px;color:#64748b;letter-spacing:1px;">Loading air quality data...</div>
</div>
<script>
window.addEventListener('load', function() {
    const loader = document.getElementById('page-loader');
    if (loader) {
        setTimeout(() => {
            loader.style.opacity = '0';
            loader.style.visibility = 'hidden';
        }, 600);
    }
});
</script>

    <canvas id="bg-canvas"></canvas>

    <nav id="navbar" class="fixed top-6 left-1/2 -translate-x-1/2 w-[95%] max-w-5xl z-50 rounded-full border border-white/10 bg-black/20 shadow-2xl shadow-black/20 backdrop-blur-lg">
        <div class="mx-auto px-6">
            <div class="flex items-center justify-between h-16">
               <a href="index.html" class="flex items-center space-x-2">
                    <i data-lucide="sprout" class="text-sky-500 w-7 h-7"></i>
                    <span class="text-2xl font-bold text-slate-900">ClearSkies</span>
                    </a>
                <!-- Desktop Menu -->
                <div class="hidden md:flex items-center space-x-2">
                    <a href="index.html" class="px-4 py-2 text-slate-600 hover:text-sky-600 transition-colors duration-300">Home</a>
                    <a href="dashboard.html" class="px-4 py-2 text-slate-600 hover:text-sky-600 transition-colors duration-300">Dashboard</a>
                    <a href="features.html" class="px-4 py-2 text-slate-600 hover:text-sky-600 transition-colors duration-300">Features</a>
                    <a href="how-it-works.html" class="px-4 py-2 text-sky-600 font-semibold transition-colors duration-300">How It Works</a>
                    <a href="contact.html" class="px-4 py-2 text-slate-600 hover:text-sky-600 transition-colors duration-300">Contact</a>
                </div>

                <!-- Mobile Menu Button -->
                <div class="md:hidden flex items-center">
                    <button id="mobile-menu-button" class="relative p-2 text-slate-700 focus:outline-none focus:ring-2 focus:ring-sky-400 focus:ring-opacity-50 rounded-lg transition-all duration-200 hover:bg-slate-100">
                        <div class="w-6 h-6 flex flex-col justify-center items-center">
                            <span class="hamburger-line block h-0.5 w-6 bg-current transform transition-all duration-300 ease-in-out"></span>
                            <span class="hamburger-line block h-0.5 w-6 bg-current transform transition-all duration-300 ease-in-out mt-1"></span>
                            <span class="hamburger-line block h-0.5 w-6 bg-current transform transition-all duration-300 ease-in-out mt-1"></span>
                        </div>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Mobile Menu (moved outside nav to fix stacking context) -->
    <div id="mobile-menu" class="mobile-menu md:hidden fixed top-0 right-0 h-full w-80 max-w-[85vw] bg-white/98 backdrop-blur-xl z-[60] flex flex-col transform translate-x-full transition-transform duration-300 ease-in-out hidden border-l border-slate-200 shadow-2xl">
        <!-- Mobile Menu Header -->
        <div class="flex justify-between items-center p-6 border-b border-slate-200">
            <div class="flex items-center">
                <i data-lucide="sprout" class="text-sky-500 w-7 h-7"></i>
                    <span class="text-2xl font-bold text-slate-900">ClearSkies</span>
            </div>
            <button id="mobile-menu-close" class="p-2 hover:bg-slate-100 rounded-xl transition-all duration-200 hover:scale-105">
                <i data-lucide="x" class="w-6 h-6 text-slate-500"></i>
            </button>
        </div>
        
        <!-- Mobile Menu Content -->
        <div class="flex-1 overflow-y-auto px-6 py-4">
            <!-- Navigation Links -->
            <div class="space-y-2 mb-6">
                <h3 class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-3">Navigation</h3>
                <a href="index.html" class="flex items-center py-3 px-4 text-slate-600 hover:text-sky-600 hover:bg-sky-50 rounded-xl transition-all duration-200">
                    <i data-lucide="home" class="w-5 h-5 mr-3"></i>
                    <span>Home</span>
                </a>
                <a href="dashboard.html" class="flex items-center py-3 px-4 text-slate-600 hover:text-sky-600 hover:bg-sky-50 rounded-xl transition-all duration-200">
                    <i data-lucide="bar-chart-3" class="w-5 h-5 mr-3"></i>
                    <span>Dashboard</span>
                </a>
                <a href="features.html" class="flex items-center py-3 px-4 text-slate-600 hover:text-sky-600 hover:bg-sky-50 rounded-xl transition-all duration-200">
                    <i data-lucide="zap" class="w-5 h-5 mr-3"></i>
                    <span>Features</span>
                </a>
                <a href="how-it-works.html" class="flex items-center py-3 px-4 text-sky-600 font-semibold bg-sky-50 rounded-xl transition-all duration-200">
                    <i data-lucide="info" class="w-5 h-5 mr-3"></i>
                    <span>How It Works</span>
                </a>
                <a href="contact.html" class="flex items-center py-3 px-4 text-slate-600 hover:text-sky-600 hover:bg-sky-50 rounded-xl transition-all duration-200">
                    <i data-lucide="mail" class="w-5 h-5 mr-3"></i>
                    <span>Contact</span>
                </a>
            </div>
        </div>
    </div>

    <div id="content-wrapper">
        <section id="how-it-works" class="content-section pt-32 md:pt-40">
            <div class="glass-panel p-8 md:p-12 rounded-2xl max-w-6xl text-center">
                <h2 class="text-4xl md:text-4xl font-bold mb-4 reveal-up gradient-text-animated">Simple, Powerful, and Accurate</h2>
                <p class="text-lg text-slate-600 mb-12 max-w-3xl mx-auto reveal-up" style="--reveal-delay: 0.2s;">Our three-step process makes air quality monitoring effortless.</p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-5 process-grid">
                    <div class="flex flex-col items-center p-4 process-card">
                        <div class="w-24 h-24 rounded-full bg-sky-100 flex items-center justify-center mb-6"><i data-lucide="wifi" class="w-12 h-12 text-sky-600"></i></div>
                        <h3 class="text-2xl font-bold mb-3 text-slate-800">1. Data Collection Layer</h3>
                        <p class="text-slate-600">When the system is operational and connected to the internet, the ESP32 microcontroller collects air pollution data using the MQ135 gas sensor. The DHT11 sensor measures ambient temperature and humidity. The collected sensor data is processed and prepared for cloud transmission.</p>
                    </div>
                    <div class="flex flex-col items-center p-4 process-card">
                        <div class="w-24 h-24 rounded-full bg-blue-100 flex items-center justify-center mb-6"><i data-lucide="cloud" class="w-12 h-12 text-blue-600"></i></div>
                        <h3 class="text-2xl font-bold mb-3 text-slate-800">2. Cloud Layer</h3>
                        <p class="text-slate-600">This layer functions as a communication bridge between the ESP32 and the web application. Google Firebase securely stores, processes, and synchronizes the incoming sensor data, enabling real-time cloud-based data management and seamless data transmission.</p>
                    </div>
                    <div class="flex flex-col items-center p-4 process-card">
                        <div class="w-24 h-24 rounded-full bg-violet-100 flex items-center justify-center mb-6"><i data-lucide="bar-chart-3" class="w-12 h-12 text-violet-600"></i></div>
                        <h3 class="text-2xl font-bold mb-3 text-slate-800">3. User Interface Layer</h3>
                        <p class="text-slate-600">The web application retrieves live data from Google Firebase and presents real-time metrics, including AQI, temperature, humidity, and other environmental parameters, through an interactive dashboard.</p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
    (function() {
    const canvas = document.getElementById('bg-canvas');
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer({ canvas, antialias: true, alpha: true });
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
    renderer.setSize(window.innerWidth, window.innerHeight);
    camera.position.setZ(30);
    
    const particleCount = 200;
    const positions = new Float32Array(particleCount * 3);
    const colors = new Float32Array(particleCount * 3);
    const particleData = [];
    
    const colorOptions = [
        new THREE.Color(0x38bdf8),  // sky-400
        new THREE.Color(0x818cf8),  // indigo-400
        new THREE.Color(0x34d399),  // emerald-400
        new THREE.Color(0xa78bfa),  // violet-400
    ];
    
    for (let i = 0; i < particleCount; i++) {
        const x = (Math.random() - 0.5) * 80;
        const y = (Math.random() - 0.5) * 80;
        const z = (Math.random() - 0.5) * 40;
        positions[i * 3] = x;
        positions[i * 3 + 1] = y;
        positions[i * 3 + 2] = z;
        
        const color = colorOptions[Math.floor(Math.random() * colorOptions.length)];
        colors[i * 3] = color.r;
        colors[i * 3 + 1] = color.g;
        colors[i * 3 + 2] = color.b;
        
        particleData.push({
            velocity: new THREE.Vector3(
                (Math.random() - 0.5) * 0.02,
                (Math.random() - 0.5) * 0.02,
                0
            )
        });
    }
    
    const particleGeo = new THREE.BufferGeometry();
    particleGeo.setAttribute('position', new THREE.BufferAttribute(positions, 3));
    particleGeo.setAttribute('color', new THREE.BufferAttribute(colors, 3));
    
    const particleMat = new THREE.PointsMaterial({
        size: 0.2,
        vertexColors: true,
        transparent: true,
        opacity: 0.35,
        sizeAttenuation: true
    });
    
    const particlesMesh = new THREE.Points(particleGeo, particleMat);
    scene.add(particlesMesh);
    
    const lineGroup = new THREE.Group();
    scene.add(lineGroup);
    
    const mouse = { x: 0, y: 0 };
    document.addEventListener('mousemove', (e) => {
        mouse.x = (e.clientX / window.innerWidth - 0.5) * 2;
        mouse.y = -(e.clientY / window.innerHeight - 0.5) * 2;
    });
    
    let frameCount = 0;
    function animate() {
        requestAnimationFrame(animate);
        frameCount++;
        
        const posArr = particleGeo.attributes.position.array;
        for (let i = 0; i < particleCount; i++) {
            posArr[i * 3] += particleData[i].velocity.x;
            posArr[i * 3 + 1] += particleData[i].velocity.y;
            
            if (Math.abs(posArr[i * 3]) > 40) particleData[i].velocity.x *= -1;
            if (Math.abs(posArr[i * 3 + 1]) > 40) particleData[i].velocity.y *= -1;
        }
        particleGeo.attributes.position.needsUpdate = true;
        
        if (frameCount % 10 === 0) {
            while (lineGroup.children.length > 0) {
                lineGroup.remove(lineGroup.children[0]);
            }
            const maxConnections = 50;
            let connectionCount = 0;
            for (let i = 0; i < particleCount && connectionCount < maxConnections; i++) {
                for (let j = i + 1; j < particleCount && connectionCount < maxConnections; j++) {
                    const dx = posArr[i * 3] - posArr[j * 3];
                    const dy = posArr[i * 3 + 1] - posArr[j * 3 + 1];
                    const dist = Math.sqrt(dx * dx + dy * dy);
                    if (dist < 12) {
                        const lineGeo = new THREE.BufferGeometry().setFromPoints([
                            new THREE.Vector3(posArr[i * 3], posArr[i * 3 + 1], posArr[i * 3 + 2]),
                            new THREE.Vector3(posArr[j * 3], posArr[j * 3 + 1], posArr[j * 3 + 2])
                        ]);
                        const opacity = 1 - dist / 12;
                        const mat = new THREE.LineBasicMaterial({ color: 0x38bdf8, transparent: true, opacity: opacity * 0.15 });
                        lineGroup.add(new THREE.Line(lineGeo, mat));
                        connectionCount++;
                    }
                }
            }
        }
        
        camera.position.x += (mouse.x * 2 - camera.position.x) * 0.02;
        camera.position.y += (mouse.y * 2 - camera.position.y) * 0.02;
        camera.lookAt(scene.position);
        
        renderer.render(scene, camera);
    }
    animate();
    
    window.addEventListener('resize', () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    });
})();
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/ScrollTrigger.min.js"></script>
    <script>
        window.onload = function() {
            lucide.createIcons();
            
            const navbar = document.getElementById('navbar');
            const mobileMenu = document.getElementById('mobile-menu');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenuClose = document.getElementById('mobile-menu-close');

            window.addEventListener('scroll', () => {
                if (window.scrollY > 50) {
                    navbar.classList.add('top-0', 'w-full', 'rounded-none', '!bg-white/95');
                    navbar.classList.remove('top-6', 'w-[95%]', 'rounded-full');
                } else {
                    navbar.classList.remove('top-0', 'w-full', 'rounded-none', '!bg-white/95');
                    navbar.classList.add('top-6', 'w-[95%]', 'rounded-full');
                }
            });

            mobileMenuButton?.addEventListener('click', (e) => {
                e.stopPropagation();
                mobileMenu.classList.remove('hidden');
                setTimeout(() => {
                    mobileMenu.classList.add('show');
                }, 10);
            });
            
            mobileMenuClose?.addEventListener('click', () => {
                mobileMenu.classList.remove('show');
                setTimeout(() => {
                    mobileMenu.classList.add('hidden');
                }, 300);
            });
            
            // Close mobile menu when clicking outside
            document.addEventListener('click', (e) => {
                if (!mobileMenu.contains(e.target) && !mobileMenuButton.contains(e.target)) {
                    mobileMenu.classList.remove('show');
                    setTimeout(() => {
                        mobileMenu.classList.add('hidden');
                    }, 300);
                }
            });


            gsap.registerPlugin(ScrollTrigger);
            
            // Re-hide elements before animating them in with GSAP
            gsap.set(".reveal-up", { opacity: 0, y: 50 });
            gsap.set(".process-card", { opacity: 0, y: 40 });

            gsap.to(".reveal-up", {
                scrollTrigger: { 
                    trigger: "#how-it-works", 
                    start: "top 80%" 
                },
                y: 0, 
                opacity: 1, 
                duration: 1, 
                stagger: 0.2,
                ease: "power2.out"
            });

            gsap.to(".process-card", {
                scrollTrigger: { 
                    trigger: ".process-grid", 
                    start: "top 85%" 
                },
                y: 0, 
                opacity: 1, 
                duration: 0.8, 
                stagger: 0.2, 
                ease: "power1.out"
            });
        };
    </script>
    <script src="pwa.js"></script>
</body>
</html>


